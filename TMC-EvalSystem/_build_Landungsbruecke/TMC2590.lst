   1              		.cpu cortex-m4
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 4
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"TMC2590.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.align	1
  16              		.arch armv7e-m
  17              		.syntax unified
  18              		.thumb
  19              		.thumb_func
  20              		.fpu softvfp
  22              	readWrite.isra.0:
  23              	.LVL0:
  24              	.LFB10:
  25              		.file 1 "TMC-API/tmc/ic/TMC2590/TMC2590.c"
   1:TMC-API/tmc/ic/TMC2590/TMC2590.c **** /*
   2:TMC-API/tmc/ic/TMC2590/TMC2590.c ****  * TMC2590.c
   3:TMC-API/tmc/ic/TMC2590/TMC2590.c ****  *
   4:TMC-API/tmc/ic/TMC2590/TMC2590.c ****  *  Created on: 09.01.2019
   5:TMC-API/tmc/ic/TMC2590/TMC2590.c ****  *      Author: LK
   6:TMC-API/tmc/ic/TMC2590/TMC2590.c ****  */
   7:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
   8:TMC-API/tmc/ic/TMC2590/TMC2590.c **** #include "TMC2590.h"
   9:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
  10:TMC-API/tmc/ic/TMC2590/TMC2590.c **** // => SPI wrapper
  11:TMC-API/tmc/ic/TMC2590/TMC2590.c **** extern void tmc2590_readWriteArray(uint8_t channel, uint8_t *data, size_t length);
  12:TMC-API/tmc/ic/TMC2590/TMC2590.c **** // <= SPI wrapper
  13:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
  14:TMC-API/tmc/ic/TMC2590/TMC2590.c **** static void continousSync(TMC2590TypeDef *tmc2590);
  15:TMC-API/tmc/ic/TMC2590/TMC2590.c **** static void readWrite(TMC2590TypeDef *tmc2590, uint32_t value);
  16:TMC-API/tmc/ic/TMC2590/TMC2590.c **** static void readImmediately(TMC2590TypeDef *tmc2590, uint8_t rdsel);
  17:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
  18:TMC-API/tmc/ic/TMC2590/TMC2590.c **** static void standStillCurrentLimitation(TMC2590TypeDef *tmc2590, uint32_t tick)
  19:TMC-API/tmc/ic/TMC2590/TMC2590.c **** {
  20:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	// Check if the motor is in standstill
  21:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	if (!TMC2590_GET_STST(tmc2590_readInt(tmc2590, TMC2590_RESPONSE_LATEST)))
  22:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
  23:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		// The standStillTick variable holds the tick counter where a standstill
  24:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		// started.
  25:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		// Not standing still -> standstill tick equals tick -> Time since
  26:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		// standstill == 0
  27:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		tmc2590->standStillTick = tick;
  28:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	}
  29:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
  30:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	// Check if standstill timeout has been reached
  31:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	if (tick - tmc2590->standStillTick > tmc2590->standStillTimeout)
  32:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
  33:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		tmc2590->isStandStillCurrent = 1;
  34:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		// Change to standstill current
  35:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		TMC2590_FIELD_UPDATE(tmc2590, TMC2590_SGCSCONF, TMC2590_CS_MASK, TMC2590_CS_SHIFT, tmc2590->stand
  36:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	}
  37:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	else
  38:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
  39:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		tmc2590->isStandStillCurrent = 0;
  40:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		// Change to run current
  41:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		TMC2590_FIELD_UPDATE(tmc2590, TMC2590_SGCSCONF, TMC2590_CS_MASK, TMC2590_CS_SHIFT, tmc2590->runCu
  42:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	}
  43:TMC-API/tmc/ic/TMC2590/TMC2590.c **** }
  44:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
  45:TMC-API/tmc/ic/TMC2590/TMC2590.c **** static void continousSync(TMC2590TypeDef *tmc2590)
  46:TMC-API/tmc/ic/TMC2590/TMC2590.c **** { // refreshes settings to prevent chip from loosing settings on brownout
  47:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	static uint8_t write  = 0;
  48:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	static uint8_t read   = 0;
  49:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	static uint8_t rdsel  = 0;
  50:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
  51:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	// rotational reading all replys to keep values up to date
  52:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	uint32_t value, drvConf;
  53:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
  54:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	// additional reading to keep all replies up to date
  55:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	value = drvConf = tmc2590_readInt(0, TMC2590_WRITE_BIT | TMC2590_DRVCONF);  // buffer value amd  d
  56:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	value &= ~TMC2590_SET_RDSEL(-1);                                        // clear RDSEL bits
  57:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	value |= TMC2590_SET_RDSEL(rdsel % 3);                                  // clear set rdsel
  58:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	readWrite(tmc2590, value);
  59:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	readWrite(tmc2590, drvConf);
  60:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
  61:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	// determine next read address
  62:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	read = (read + 1) % 3;
  63:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
  64:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	// Write settings from shadow register to chip.
  65:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	readWrite(tmc2590, tmc2590->config->shadowRegister[TMC2590_WRITE_BIT | write]);
  66:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
  67:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	// Determine next write address while skipping unused addresses
  68:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	if (write == TMC2590_DRVCTRL)
  69:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
  70:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		// Skip over the unused addresses between DRVCTRL and CHOPCONF
  71:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		write = TMC2590_CHOPCONF;
  72:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	}
  73:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	else
  74:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
  75:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		// Increase the address
  76:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		write = (write + 1) & TMC2590_REGISTER_COUNT;
  77:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	}
  78:TMC-API/tmc/ic/TMC2590/TMC2590.c **** }
  79:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
  80:TMC-API/tmc/ic/TMC2590/TMC2590.c **** static void readWrite(TMC2590TypeDef *tmc2590, uint32_t value)
  26              		.loc 1 80 13 view -0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 8
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  81:TMC-API/tmc/ic/TMC2590/TMC2590.c **** {	// sending data (value) via spi to TMC262, coping written and received data to shadow register
  82:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	static uint8_t rdsel = 0; // number of expected read response
  30              		.loc 1 82 2 view .LVU1
  83:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
  84:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	uint8_t data[] = { BYTE(value, 2), BYTE(value, 1), BYTE(value, 0) };
  31              		.loc 1 84 2 view .LVU2
  80:TMC-API/tmc/ic/TMC2590/TMC2590.c **** {	// sending data (value) via spi to TMC262, coping written and received data to shadow register
  32              		.loc 1 80 13 is_stmt 0 view .LVU3
  33 0000 37B5     		push	{r0, r1, r2, r4, r5, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 24
  36              		.cfi_offset 4, -12
  37              		.cfi_offset 5, -8
  38              		.cfi_offset 14, -4
  39              		.loc 1 84 21 view .LVU4
  40 0002 0B0C     		lsrs	r3, r1, #16
  41              		.loc 1 84 10 view .LVU5
  42 0004 8DF80430 		strb	r3, [sp, #4]
  43              		.loc 1 84 37 view .LVU6
  44 0008 0B0A     		lsrs	r3, r1, #8
  45              		.loc 1 84 10 view .LVU7
  46 000a 8DF80530 		strb	r3, [sp, #5]
  85:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
  86:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590_readWriteArray(tmc2590->config->channel, &data[0], 3);
  47              		.loc 1 86 2 view .LVU8
  48 000e 0368     		ldr	r3, [r0]
  84:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
  49              		.loc 1 84 10 view .LVU9
  50 0010 8DF80610 		strb	r1, [sp, #6]
  51              		.loc 1 86 2 is_stmt 1 view .LVU10
  80:TMC-API/tmc/ic/TMC2590/TMC2590.c **** {	// sending data (value) via spi to TMC262, coping written and received data to shadow register
  52              		.loc 1 80 13 is_stmt 0 view .LVU11
  53 0014 0546     		mov	r5, r0
  54 0016 0C46     		mov	r4, r1
  55              		.loc 1 86 2 view .LVU12
  56 0018 93F81002 		ldrb	r0, [r3, #528]	@ zero_extendqisi2
  57 001c 0322     		movs	r2, #3
  58 001e 01A9     		add	r1, sp, #4
  59              	.LVL1:
  60              		.loc 1 86 2 view .LVU13
  61 0020 FFF7FEFF 		bl	tmc2590_readWriteArray
  62              	.LVL2:
  87:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
  88:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590->config->shadowRegister[rdsel] = _8_32(data[0], data[1], data[2], 0) >> 12;
  63              		.loc 1 88 2 is_stmt 1 view .LVU14
  64              		.loc 1 88 43 is_stmt 0 view .LVU15
  65 0024 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
  66 0028 9DF80410 		ldrb	r1, [sp, #4]	@ zero_extendqisi2
  67              		.loc 1 88 33 view .LVU16
  68 002c 0E48     		ldr	r0, .L5
  69              		.loc 1 88 9 view .LVU17
  70 002e 2A68     		ldr	r2, [r5]
  71              		.loc 1 88 43 view .LVU18
  72 0030 1B04     		lsls	r3, r3, #16
  73 0032 43EA0163 		orr	r3, r3, r1, lsl #24
  74 0036 9DF80610 		ldrb	r1, [sp, #6]	@ zero_extendqisi2
  75 003a 43EA0123 		orr	r3, r3, r1, lsl #8
  76              		.loc 1 88 33 view .LVU19
  77 003e 0178     		ldrb	r1, [r0]	@ zero_extendqisi2
  78              		.loc 1 88 41 view .LVU20
  79 0040 02EB8101 		add	r1, r2, r1, lsl #2
  80              		.loc 1 88 79 view .LVU21
  81 0044 1B13     		asrs	r3, r3, #12
  82              		.loc 1 88 41 view .LVU22
  83 0046 4B60     		str	r3, [r1, #4]
  89:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590->config->shadowRegister[TMC2590_RESPONSE_LATEST] = tmc2590->config->shadowRegister[rdsel];
  84              		.loc 1 89 2 is_stmt 1 view .LVU23
  85              		.loc 1 89 59 is_stmt 0 view .LVU24
  86 0048 1361     		str	r3, [r2, #16]
  90:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
  91:TMC-API/tmc/ic/TMC2590/TMC2590.c **** // set virtual read address for next reply given by RDSEL, can only change by setting RDSEL in DRVC
  92:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	if(TMC2590_GET_ADDRESS(value) == TMC2590_DRVCONF)
  87              		.loc 1 92 2 is_stmt 1 view .LVU25
  88              		.loc 1 92 4 is_stmt 0 view .LVU26
  89 004a A30C     		lsrs	r3, r4, #18
  90 004c 06D0     		beq	.L2
  91              		.loc 1 92 5 view .LVU27
  92 004e C4F34243 		ubfx	r3, r4, #17, #3
  93              		.loc 1 92 32 view .LVU28
  94 0052 072B     		cmp	r3, #7
  93:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		rdsel = TMC2590_GET_RDSEL(value);
  95              		.loc 1 93 3 is_stmt 1 view .LVU29
  96              		.loc 1 93 11 is_stmt 0 view .LVU30
  97 0054 04BF     		itt	eq
  98 0056 C4F30111 		ubfxeq	r1, r4, #4, #2
  99              		.loc 1 93 9 view .LVU31
 100 005a 0170     		strbeq	r1, [r0]
 101              	.L2:
  94:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
  95:TMC-API/tmc/ic/TMC2590/TMC2590.c **** // write store written value to shadow register
  96:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590->config->shadowRegister[TMC2590_GET_ADDRESS(value)] = value;
 102              		.loc 1 96 62 view .LVU32
 103 005c 02EB8302 		add	r2, r2, r3, lsl #2
 104 0060 5460     		str	r4, [r2, #4]
  97:TMC-API/tmc/ic/TMC2590/TMC2590.c **** }
 105              		.loc 1 97 1 view .LVU33
 106 0062 03B0     		add	sp, sp, #12
 107              	.LCFI1:
 108              		.cfi_def_cfa_offset 12
 109              		@ sp needed
 110 0064 30BD     		pop	{r4, r5, pc}
 111              	.LVL3:
 112              	.L6:
 113              		.loc 1 97 1 view .LVU34
 114 0066 00BF     		.align	2
 115              	.L5:
 116 0068 00000000 		.word	.LANCHOR0
 117              		.cfi_endproc
 118              	.LFE10:
 120              		.align	1
 121              		.global	tmc2590_writeInt
 122              		.syntax unified
 123              		.thumb
 124              		.thumb_func
 125              		.fpu softvfp
 127              	tmc2590_writeInt:
 128              	.LVL4:
 129              	.LFB4:
  98:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
  99:TMC-API/tmc/ic/TMC2590/TMC2590.c **** static void readImmediately(TMC2590TypeDef *tmc2590, uint8_t rdsel)
 100:TMC-API/tmc/ic/TMC2590/TMC2590.c **** { // sets desired reply in DRVCONF register, resets it to previous settings whilst reading desired 
 101:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	uint32_t value, drvConf;
 102:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 103:TMC-API/tmc/ic/TMC2590/TMC2590.c **** // additional reading to keep all replies up to date
 104:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 105:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	value = tmc2590_readInt(tmc2590, TMC2590_WRITE_BIT | TMC2590_DRVCONF);  // buffer value amd  drvCo
 106:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	drvConf = value;
 107:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	value &= ~TMC2590_SET_RDSEL(-1);                              // clear RDSEL bits
 108:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	value |= TMC2590_SET_RDSEL(rdsel%3);                          // set rdsel
 109:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	readWrite(tmc2590, value);                                    // write to chip and readout reply
 110:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	readWrite(tmc2590, drvConf);
 111:TMC-API/tmc/ic/TMC2590/TMC2590.c **** }
 112:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 113:TMC-API/tmc/ic/TMC2590/TMC2590.c **** void tmc2590_writeInt(TMC2590TypeDef *tmc2590, uint8_t address, int32_t value)
 114:TMC-API/tmc/ic/TMC2590/TMC2590.c **** {
 130              		.loc 1 114 1 is_stmt 1 view -0
 131              		.cfi_startproc
 132              		@ args = 0, pretend = 0, frame = 0
 133              		@ frame_needed = 0, uses_anonymous_args = 0
 134              		@ link register save eliminated.
 115:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	value = TMC2590_VALUE(value);
 135              		.loc 1 115 2 view .LVU36
 114:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	value = TMC2590_VALUE(value);
 136              		.loc 1 114 1 is_stmt 0 view .LVU37
 137 006c 0B46     		mov	r3, r1
 116:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590->config->shadowRegister[TMC_ADDRESS(address) | TMC2590_WRITE_BIT] = value;
 138              		.loc 1 116 55 view .LVU38
 139 006e 03F07703 		and	r3, r3, #119
 115:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	value = TMC2590_VALUE(value);
 140              		.loc 1 115 8 view .LVU39
 141 0072 C2F31301 		ubfx	r1, r2, #0, #20
 142              	.LVL5:
 143              		.loc 1 116 2 is_stmt 1 view .LVU40
 144              		.loc 1 116 76 is_stmt 0 view .LVU41
 145 0076 0268     		ldr	r2, [r0]
 146              		.loc 1 116 55 view .LVU42
 147 0078 43F00803 		orr	r3, r3, #8
 148              		.loc 1 116 76 view .LVU43
 149 007c 02EB8303 		add	r3, r2, r3, lsl #2
 114:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	value = TMC2590_VALUE(value);
 150              		.loc 1 114 1 view .LVU44
 151 0080 10B4     		push	{r4}
 152              	.LCFI2:
 153              		.cfi_def_cfa_offset 4
 154              		.cfi_offset 4, -4
 155              		.loc 1 116 76 view .LVU45
 156 0082 5960     		str	r1, [r3, #4]
 117:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	if(!tmc2590->continuousModeEnable)
 157              		.loc 1 117 2 is_stmt 1 view .LVU46
 158              		.loc 1 117 4 is_stmt 0 view .LVU47
 159 0084 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 160 0086 0BB9     		cbnz	r3, .L7
 118:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		readWrite(tmc2590, value);
 161              		.loc 1 118 3 is_stmt 1 view .LVU48
 119:TMC-API/tmc/ic/TMC2590/TMC2590.c **** }
 162              		.loc 1 119 1 is_stmt 0 view .LVU49
 163 0088 10BC     		pop	{r4}
 164              	.LCFI3:
 165              		.cfi_remember_state
 166              		.cfi_restore 4
 167              		.cfi_def_cfa_offset 0
 118:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		readWrite(tmc2590, value);
 168              		.loc 1 118 3 view .LVU50
 169 008a B9E7     		b	readWrite.isra.0
 170              	.LVL6:
 171              	.L7:
 172              	.LCFI4:
 173              		.cfi_restore_state
 174              		.loc 1 119 1 view .LVU51
 175 008c 10BC     		pop	{r4}
 176              	.LCFI5:
 177              		.cfi_restore 4
 178              		.cfi_def_cfa_offset 0
 179 008e 7047     		bx	lr
 180              		.cfi_endproc
 181              	.LFE4:
 183              		.align	1
 184              		.global	tmc2590_readInt
 185              		.syntax unified
 186              		.thumb
 187              		.thumb_func
 188              		.fpu softvfp
 190              	tmc2590_readInt:
 191              	.LVL7:
 192              	.LFB5:
 120:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 121:TMC-API/tmc/ic/TMC2590/TMC2590.c **** uint32_t tmc2590_readInt(TMC2590TypeDef *tmc2590, uint8_t address)
 122:TMC-API/tmc/ic/TMC2590/TMC2590.c **** {
 193              		.loc 1 122 1 is_stmt 1 view -0
 194              		.cfi_startproc
 195              		@ args = 0, pretend = 0, frame = 0
 196              		@ frame_needed = 0, uses_anonymous_args = 0
 123:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	if(!tmc2590->continuousModeEnable && !(address & TMC2590_WRITE_BIT))
 197              		.loc 1 123 2 view .LVU53
 122:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	if(!tmc2590->continuousModeEnable && !(address & TMC2590_WRITE_BIT))
 198              		.loc 1 122 1 is_stmt 0 view .LVU54
 199 0090 70B5     		push	{r4, r5, r6, lr}
 200              	.LCFI6:
 201              		.cfi_def_cfa_offset 16
 202              		.cfi_offset 4, -16
 203              		.cfi_offset 5, -12
 204              		.cfi_offset 6, -8
 205              		.cfi_offset 14, -4
 206              		.loc 1 123 36 view .LVU55
 207 0092 0279     		ldrb	r2, [r0, #4]	@ zero_extendqisi2
 208 0094 01F00803 		and	r3, r1, #8
 209 0098 1343     		orrs	r3, r2, r3
 122:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	if(!tmc2590->continuousModeEnable && !(address & TMC2590_WRITE_BIT))
 210              		.loc 1 122 1 view .LVU56
 211 009a 0546     		mov	r5, r0
 212 009c 0C46     		mov	r4, r1
 213              		.loc 1 123 36 view .LVU57
 214 009e 15D1     		bne	.L10
 124:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		readImmediately(tmc2590, address);
 215              		.loc 1 124 3 is_stmt 1 view .LVU58
 216              	.LVL8:
 217              	.LBB4:
 218              	.LBI4:
  99:TMC-API/tmc/ic/TMC2590/TMC2590.c **** { // sets desired reply in DRVCONF register, resets it to previous settings whilst reading desired 
 219              		.loc 1 99 13 view .LVU59
 220              	.LBB5:
 101:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 221              		.loc 1 101 2 view .LVU60
 105:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	drvConf = value;
 222              		.loc 1 105 2 view .LVU61
 105:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	drvConf = value;
 223              		.loc 1 105 10 is_stmt 0 view .LVU62
 224 00a0 0F21     		movs	r1, #15
 225              	.LVL9:
 105:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	drvConf = value;
 226              		.loc 1 105 10 view .LVU63
 227 00a2 FFF7FEFF 		bl	tmc2590_readInt
 228              	.LVL10:
 108:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	readWrite(tmc2590, value);                                    // write to chip and readout reply
 229              		.loc 1 108 11 view .LVU64
 230 00a6 0323     		movs	r3, #3
 231 00a8 B4FBF3F3 		udiv	r3, r4, r3
 232 00ac 03EB4303 		add	r3, r3, r3, lsl #1
 233 00b0 E31A     		subs	r3, r4, r3
 107:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	value |= TMC2590_SET_RDSEL(rdsel%3);                          // set rdsel
 234              		.loc 1 107 8 view .LVU65
 235 00b2 20F03001 		bic	r1, r0, #48
 108:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	readWrite(tmc2590, value);                                    // write to chip and readout reply
 236              		.loc 1 108 11 view .LVU66
 237 00b6 DBB2     		uxtb	r3, r3
 105:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	drvConf = value;
 238              		.loc 1 105 10 view .LVU67
 239 00b8 0646     		mov	r6, r0
 240              	.LVL11:
 106:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	value &= ~TMC2590_SET_RDSEL(-1);                              // clear RDSEL bits
 241              		.loc 1 106 2 is_stmt 1 view .LVU68
 107:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	value |= TMC2590_SET_RDSEL(rdsel%3);                          // set rdsel
 242              		.loc 1 107 2 view .LVU69
 108:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	readWrite(tmc2590, value);                                    // write to chip and readout reply
 243              		.loc 1 108 2 view .LVU70
 109:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	readWrite(tmc2590, drvConf);
 244              		.loc 1 109 2 view .LVU71
 245 00ba 41EA0311 		orr	r1, r1, r3, lsl #4
 246              	.LVL12:
 109:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	readWrite(tmc2590, drvConf);
 247              		.loc 1 109 2 is_stmt 0 view .LVU72
 248 00be 2846     		mov	r0, r5
 249              	.LVL13:
 109:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	readWrite(tmc2590, drvConf);
 250              		.loc 1 109 2 view .LVU73
 251 00c0 FFF79EFF 		bl	readWrite.isra.0
 252              	.LVL14:
 110:TMC-API/tmc/ic/TMC2590/TMC2590.c **** }
 253              		.loc 1 110 2 is_stmt 1 view .LVU74
 254 00c4 3146     		mov	r1, r6
 255 00c6 2846     		mov	r0, r5
 256 00c8 FFF79AFF 		bl	readWrite.isra.0
 257              	.LVL15:
 258              	.L10:
 110:TMC-API/tmc/ic/TMC2590/TMC2590.c **** }
 259              		.loc 1 110 2 is_stmt 0 view .LVU75
 260              	.LBE5:
 261              	.LBE4:
 125:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 126:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	return tmc2590->config->shadowRegister[TMC_ADDRESS(address)];
 262              		.loc 1 126 2 is_stmt 1 view .LVU76
 263              		.loc 1 126 40 is_stmt 0 view .LVU77
 264 00cc 2968     		ldr	r1, [r5]
 265              		.loc 1 126 41 view .LVU78
 266 00ce 04F07F04 		and	r4, r4, #127
 267              		.loc 1 126 40 view .LVU79
 268 00d2 01EB8404 		add	r4, r1, r4, lsl #2
 127:TMC-API/tmc/ic/TMC2590/TMC2590.c **** }
 269              		.loc 1 127 1 view .LVU80
 270 00d6 6068     		ldr	r0, [r4, #4]
 271 00d8 70BD     		pop	{r4, r5, r6, pc}
 272              		.loc 1 127 1 view .LVU81
 273              		.cfi_endproc
 274              	.LFE5:
 276              		.align	1
 277              		.global	tmc2590_init
 278              		.syntax unified
 279              		.thumb
 280              		.thumb_func
 281              		.fpu softvfp
 283              	tmc2590_init:
 284              	.LVL16:
 285              	.LFB6:
 128:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 129:TMC-API/tmc/ic/TMC2590/TMC2590.c **** void tmc2590_init(TMC2590TypeDef *tmc2590, uint8_t channel, ConfigurationTypeDef *tmc2590_config, c
 130:TMC-API/tmc/ic/TMC2590/TMC2590.c **** {
 286              		.loc 1 130 1 is_stmt 1 view -0
 287              		.cfi_startproc
 288              		@ args = 0, pretend = 0, frame = 0
 289              		@ frame_needed = 0, uses_anonymous_args = 0
 131:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590->config               = tmc2590_config;
 290              		.loc 1 131 2 view .LVU83
 130:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590->config               = tmc2590_config;
 291              		.loc 1 130 1 is_stmt 0 view .LVU84
 292 00da 30B5     		push	{r4, r5, lr}
 293              	.LCFI7:
 294              		.cfi_def_cfa_offset 12
 295              		.cfi_offset 4, -12
 296              		.cfi_offset 5, -8
 297              		.cfi_offset 14, -4
 132:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590->config->callback     = NULL;
 298              		.loc 1 132 32 view .LVU85
 299 00dc 0024     		movs	r4, #0
 131:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590->config               = tmc2590_config;
 300              		.loc 1 131 32 view .LVU86
 301 00de 0260     		str	r2, [r0]
 302              		.loc 1 132 2 is_stmt 1 view .LVU87
 303              		.loc 1 132 32 is_stmt 0 view .LVU88
 304 00e0 C2F80C42 		str	r4, [r2, #524]
 133:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590->config->channel      = channel;
 305              		.loc 1 133 2 is_stmt 1 view .LVU89
 306              		.loc 1 133 32 is_stmt 0 view .LVU90
 307 00e4 82F81012 		strb	r1, [r2, #528]
 134:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590->config->configIndex  = 0;
 308              		.loc 1 134 2 is_stmt 1 view .LVU91
 135:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590->config->state        = CONFIG_READY;
 309              		.loc 1 135 2 view .LVU92
 310              		.loc 1 135 32 is_stmt 0 view .LVU93
 311 00e8 1480     		strh	r4, [r2]	@ movhi
 136:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 137:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590->continuousModeEnable      = 0;
 312              		.loc 1 137 2 is_stmt 1 view .LVU94
 138:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 139:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590->coolStepActiveValue       = 0;
 313              		.loc 1 139 2 view .LVU95
 140:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590->coolStepInactiveValue     = 0;
 314              		.loc 1 140 2 view .LVU96
 141:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590->coolStepThreshold         = 0;
 142:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 143:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590->isStandStillCurrent       = 0;
 315              		.loc 1 143 37 is_stmt 0 view .LVU97
 316 00ea 4FF4E062 		mov	r2, #1792
 317              	.LVL17:
 318              		.loc 1 143 37 view .LVU98
 319 00ee 8281     		strh	r2, [r0, #12]	@ movhi
 144:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590->runCurrentScale           = 7;
 145:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590->standStillCurrentScale    = 3;
 320              		.loc 1 145 37 view .LVU99
 321 00f0 0322     		movs	r2, #3
 322 00f2 8273     		strb	r2, [r0, #14]
 137:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 323              		.loc 1 137 37 view .LVU100
 324 00f4 8480     		strh	r4, [r0, #4]	@ movhi
 139:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590->coolStepInactiveValue     = 0;
 325              		.loc 1 139 37 view .LVU101
 326 00f6 8471     		strb	r4, [r0, #6]
 141:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 327              		.loc 1 141 2 is_stmt 1 view .LVU102
 143:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590->runCurrentScale           = 7;
 328              		.loc 1 143 2 view .LVU103
 144:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590->standStillCurrentScale    = 3;
 329              		.loc 1 144 2 view .LVU104
 330              		.loc 1 145 2 view .LVU105
 146:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590->standStillTimeout         = 0;
 331              		.loc 1 146 2 view .LVU106
 141:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 332              		.loc 1 141 37 is_stmt 0 view .LVU107
 333 00f8 8460     		str	r4, [r0, #8]
 334              		.loc 1 146 37 view .LVU108
 335 00fa 0461     		str	r4, [r0, #16]
 147:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 148:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	for(size_t i = 0; i < TMC2590_REGISTER_COUNT; i++)
 336              		.loc 1 148 2 is_stmt 1 view .LVU109
 337              	.LBB6:
 338              		.loc 1 148 6 view .LVU110
 339              	.LVL18:
 340              		.loc 1 148 20 view .LVU111
 341 00fc 00F11802 		add	r2, r0, #24
 342 0100 0749     		ldr	r1, .L14
 343              	.LVL19:
 344              		.loc 1 148 20 is_stmt 0 view .LVU112
 345 0102 2030     		adds	r0, r0, #32
 346              	.LVL20:
 347              		.loc 1 148 20 view .LVU113
 348 0104 043B     		subs	r3, r3, #4
 349              	.LVL21:
 350              		.loc 1 148 20 view .LVU114
 351 0106 0446     		mov	r4, r0
 352              	.LVL22:
 353              	.L12:
 149:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
 150:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		tmc2590->registerAccess[i]      = tmc2590_defaultRegisterAccess[i];
 354              		.loc 1 150 3 is_stmt 1 discriminator 3 view .LVU115
 355              		.loc 1 150 66 is_stmt 0 discriminator 3 view .LVU116
 356 0108 11F8015B 		ldrb	r5, [r1], #1	@ zero_extendqisi2
 357              	.LVL23:
 358              		.loc 1 150 35 discriminator 3 view .LVU117
 359 010c 02F8015B 		strb	r5, [r2], #1
 151:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		tmc2590->registerResetState[i]  = registerResetState[i];
 360              		.loc 1 151 3 is_stmt 1 discriminator 3 view .LVU118
 361              		.loc 1 151 55 is_stmt 0 discriminator 3 view .LVU119
 362 0110 53F8045F 		ldr	r5, [r3, #4]!
 363              		.loc 1 151 35 discriminator 3 view .LVU120
 364 0114 40F8045B 		str	r5, [r0], #4
 148:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
 365              		.loc 1 148 48 is_stmt 1 discriminator 3 view .LVU121
 366              	.LVL24:
 148:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
 367              		.loc 1 148 20 discriminator 3 view .LVU122
 148:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
 368              		.loc 1 148 2 is_stmt 0 discriminator 3 view .LVU123
 369 0118 A242     		cmp	r2, r4
 370 011a F5D1     		bne	.L12
 371              	.LBE6:
 152:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	}
 153:TMC-API/tmc/ic/TMC2590/TMC2590.c **** }
 372              		.loc 1 153 1 view .LVU124
 373 011c 30BD     		pop	{r4, r5, pc}
 374              	.LVL25:
 375              	.L15:
 376              		.loc 1 153 1 view .LVU125
 377 011e 00BF     		.align	2
 378              	.L14:
 379 0120 00000000 		.word	.LANCHOR1
 380              		.cfi_endproc
 381              	.LFE6:
 383              		.align	1
 384              		.global	tmc2590_periodicJob
 385              		.syntax unified
 386              		.thumb
 387              		.thumb_func
 388              		.fpu softvfp
 390              	tmc2590_periodicJob:
 391              	.LVL26:
 392              	.LFB7:
 154:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 155:TMC-API/tmc/ic/TMC2590/TMC2590.c **** void tmc2590_periodicJob(TMC2590TypeDef *tmc2590, uint32_t tick)
 156:TMC-API/tmc/ic/TMC2590/TMC2590.c **** {
 393              		.loc 1 156 1 is_stmt 1 view -0
 394              		.cfi_startproc
 395              		@ args = 0, pretend = 0, frame = 0
 396              		@ frame_needed = 0, uses_anonymous_args = 0
 157:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	standStillCurrentLimitation(tmc2590, tick);
 397              		.loc 1 157 2 view .LVU127
 156:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	standStillCurrentLimitation(tmc2590, tick);
 398              		.loc 1 156 1 is_stmt 0 view .LVU128
 399 0124 38B5     		push	{r3, r4, r5, lr}
 400              	.LCFI8:
 401              		.cfi_def_cfa_offset 16
 402              		.cfi_offset 3, -16
 403              		.cfi_offset 4, -12
 404              		.cfi_offset 5, -8
 405              		.cfi_offset 14, -4
 156:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	standStillCurrentLimitation(tmc2590, tick);
 406              		.loc 1 156 1 view .LVU129
 407 0126 0D46     		mov	r5, r1
 408              	.LBB11:
 409              	.LBB12:
  21:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
 410              		.loc 1 21 7 view .LVU130
 411 0128 0321     		movs	r1, #3
 412              	.LVL27:
  21:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
 413              		.loc 1 21 7 view .LVU131
 414              	.LBE12:
 415              	.LBE11:
 156:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	standStillCurrentLimitation(tmc2590, tick);
 416              		.loc 1 156 1 view .LVU132
 417 012a 0446     		mov	r4, r0
 418              	.LVL28:
 419              	.LBB14:
 420              	.LBI11:
  18:TMC-API/tmc/ic/TMC2590/TMC2590.c **** {
 421              		.loc 1 18 13 is_stmt 1 view .LVU133
 422              	.LBB13:
  21:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
 423              		.loc 1 21 2 view .LVU134
  21:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
 424              		.loc 1 21 7 is_stmt 0 view .LVU135
 425 012c FFF7FEFF 		bl	tmc2590_readInt
 426              	.LVL29:
  21:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
 427              		.loc 1 21 5 view .LVU136
 428 0130 0306     		lsls	r3, r0, #24
 429 0132 08D4     		bmi	.L17
  27:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	}
 430              		.loc 1 27 3 is_stmt 1 view .LVU137
  27:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	}
 431              		.loc 1 27 27 is_stmt 0 view .LVU138
 432 0134 6561     		str	r5, [r4, #20]
  31:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
 433              		.loc 1 31 2 is_stmt 1 view .LVU139
 434              	.LVL30:
 435              	.L18:
  39:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		// Change to run current
 436              		.loc 1 39 3 view .LVU140
  39:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		// Change to run current
 437              		.loc 1 39 32 is_stmt 0 view .LVU141
 438 0136 0023     		movs	r3, #0
 439 0138 2373     		strb	r3, [r4, #12]
  41:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	}
 440              		.loc 1 41 3 is_stmt 1 view .LVU142
 441 013a 0621     		movs	r1, #6
 442 013c 2046     		mov	r0, r4
 443 013e FFF7FEFF 		bl	tmc2590_readInt
 444              	.LVL31:
 445 0142 627B     		ldrb	r2, [r4, #13]	@ zero_extendqisi2
 446 0144 0BE0     		b	.L25
 447              	.LVL32:
 448              	.L17:
  31:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
 449              		.loc 1 31 2 view .LVU143
  31:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
 450              		.loc 1 31 11 is_stmt 0 view .LVU144
 451 0146 6169     		ldr	r1, [r4, #20]
  31:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
 452              		.loc 1 31 5 view .LVU145
 453 0148 2369     		ldr	r3, [r4, #16]
  31:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
 454              		.loc 1 31 11 view .LVU146
 455 014a 6D1A     		subs	r5, r5, r1
 456              	.LVL33:
  31:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
 457              		.loc 1 31 5 view .LVU147
 458 014c 9D42     		cmp	r5, r3
 459 014e F2D9     		bls	.L18
  33:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		// Change to standstill current
 460              		.loc 1 33 3 is_stmt 1 view .LVU148
  33:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		// Change to standstill current
 461              		.loc 1 33 32 is_stmt 0 view .LVU149
 462 0150 0123     		movs	r3, #1
 463 0152 2373     		strb	r3, [r4, #12]
  35:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	}
 464              		.loc 1 35 3 is_stmt 1 view .LVU150
 465 0154 0621     		movs	r1, #6
 466 0156 2046     		mov	r0, r4
 467 0158 FFF7FEFF 		bl	tmc2590_readInt
 468              	.LVL34:
 469 015c A27B     		ldrb	r2, [r4, #14]	@ zero_extendqisi2
 470              	.L25:
  41:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	}
 471              		.loc 1 41 3 is_stmt 0 view .LVU151
 472 015e 20F01F00 		bic	r0, r0, #31
 473 0162 02F01F02 		and	r2, r2, #31
 474 0166 0243     		orrs	r2, r2, r0
 475 0168 0621     		movs	r1, #6
 476 016a 2046     		mov	r0, r4
 477 016c FFF7FEFF 		bl	tmc2590_writeInt
 478              	.LVL35:
  41:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	}
 479              		.loc 1 41 3 view .LVU152
 480              	.LBE13:
 481              	.LBE14:
 158:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 159:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	if(tmc2590->continuousModeEnable)
 482              		.loc 1 159 2 is_stmt 1 view .LVU153
 483              		.loc 1 159 4 is_stmt 0 view .LVU154
 484 0170 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 485 0172 2BB3     		cbz	r3, .L16
 160:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{ // continuously write settings to chip and rotate through all reply types to keep data up to dat
 161:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 		continousSync(tmc2590);
 486              		.loc 1 161 3 is_stmt 1 view .LVU155
 487              	.LVL36:
 488              	.LBB15:
 489              	.LBI15:
  45:TMC-API/tmc/ic/TMC2590/TMC2590.c **** { // refreshes settings to prevent chip from loosing settings on brownout
 490              		.loc 1 45 13 view .LVU156
 491              	.LBB16:
  47:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	static uint8_t read   = 0;
 492              		.loc 1 47 2 view .LVU157
  48:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	static uint8_t rdsel  = 0;
 493              		.loc 1 48 2 view .LVU158
  49:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 494              		.loc 1 49 2 view .LVU159
  52:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 495              		.loc 1 52 2 view .LVU160
  55:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	value &= ~TMC2590_SET_RDSEL(-1);                                        // clear RDSEL bits
 496              		.loc 1 55 2 view .LVU161
  55:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	value &= ~TMC2590_SET_RDSEL(-1);                                        // clear RDSEL bits
 497              		.loc 1 55 20 is_stmt 0 view .LVU162
 498 0174 0F21     		movs	r1, #15
 499 0176 0020     		movs	r0, #0
 500 0178 FFF7FEFF 		bl	tmc2590_readInt
 501              	.LVL37:
 502 017c 0546     		mov	r5, r0
 503              	.LVL38:
  56:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	value |= TMC2590_SET_RDSEL(rdsel % 3);                                  // clear set rdsel
 504              		.loc 1 56 2 is_stmt 1 view .LVU163
  57:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	readWrite(tmc2590, value);
 505              		.loc 1 57 2 view .LVU164
  58:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	readWrite(tmc2590, drvConf);
 506              		.loc 1 58 2 view .LVU165
 507 017e 20F03001 		bic	r1, r0, #48
 508              	.LVL39:
  58:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	readWrite(tmc2590, drvConf);
 509              		.loc 1 58 2 is_stmt 0 view .LVU166
 510 0182 2046     		mov	r0, r4
 511              	.LVL40:
  58:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	readWrite(tmc2590, drvConf);
 512              		.loc 1 58 2 view .LVU167
 513 0184 FFF73CFF 		bl	readWrite.isra.0
 514              	.LVL41:
  59:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 515              		.loc 1 59 2 is_stmt 1 view .LVU168
 516 0188 2946     		mov	r1, r5
  62:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 517              		.loc 1 62 7 is_stmt 0 view .LVU169
 518 018a 104D     		ldr	r5, .L27
 519              	.LVL42:
  59:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 520              		.loc 1 59 2 view .LVU170
 521 018c 2046     		mov	r0, r4
 522 018e FFF737FF 		bl	readWrite.isra.0
 523              	.LVL43:
  62:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 524              		.loc 1 62 2 is_stmt 1 view .LVU171
  62:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 525              		.loc 1 62 15 is_stmt 0 view .LVU172
 526 0192 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
  62:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 527              		.loc 1 62 20 view .LVU173
 528 0194 0322     		movs	r2, #3
  62:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 529              		.loc 1 62 15 view .LVU174
 530 0196 0133     		adds	r3, r3, #1
  62:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 531              		.loc 1 62 20 view .LVU175
 532 0198 B3FBF2F2 		udiv	r2, r3, r2
 533 019c 02EB4202 		add	r2, r2, r2, lsl #1
 534 01a0 9B1A     		subs	r3, r3, r2
  65:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 535              		.loc 1 65 71 view .LVU176
 536 01a2 AA78     		ldrb	r2, [r5, #2]	@ zero_extendqisi2
  62:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 537              		.loc 1 62 7 view .LVU177
 538 01a4 6B70     		strb	r3, [r5, #1]
  65:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 539              		.loc 1 65 2 is_stmt 1 view .LVU178
  65:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 540              		.loc 1 65 52 is_stmt 0 view .LVU179
 541 01a6 2368     		ldr	r3, [r4]
  65:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 542              		.loc 1 65 71 view .LVU180
 543 01a8 42F00802 		orr	r2, r2, #8
  65:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 544              		.loc 1 65 52 view .LVU181
 545 01ac 03EB8203 		add	r3, r3, r2, lsl #2
  65:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 546              		.loc 1 65 2 view .LVU182
 547 01b0 2046     		mov	r0, r4
 548 01b2 5968     		ldr	r1, [r3, #4]
 549 01b4 FFF724FF 		bl	readWrite.isra.0
 550              	.LVL44:
  68:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
 551              		.loc 1 68 2 is_stmt 1 view .LVU183
  68:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
 552              		.loc 1 68 12 is_stmt 0 view .LVU184
 553 01b8 AB78     		ldrb	r3, [r5, #2]	@ zero_extendqisi2
  68:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	{
 554              		.loc 1 68 5 view .LVU185
 555 01ba 13B9     		cbnz	r3, .L21
  71:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	}
 556              		.loc 1 71 3 is_stmt 1 view .LVU186
  71:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	}
 557              		.loc 1 71 9 is_stmt 0 view .LVU187
 558 01bc 0423     		movs	r3, #4
 559              	.L26:
  76:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	}
 560              		.loc 1 76 9 view .LVU188
 561 01be AB70     		strb	r3, [r5, #2]
 562              	.LVL45:
 563              	.L16:
  76:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	}
 564              		.loc 1 76 9 view .LVU189
 565              	.LBE16:
 566              	.LBE15:
 162:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	}
 163:TMC-API/tmc/ic/TMC2590/TMC2590.c **** }
 567              		.loc 1 163 1 view .LVU190
 568 01c0 38BD     		pop	{r3, r4, r5, pc}
 569              	.LVL46:
 570              	.L21:
 571              	.LBB18:
 572              	.LBB17:
  76:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	}
 573              		.loc 1 76 3 is_stmt 1 view .LVU191
  76:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	}
 574              		.loc 1 76 18 is_stmt 0 view .LVU192
 575 01c2 0133     		adds	r3, r3, #1
  76:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	}
 576              		.loc 1 76 23 view .LVU193
 577 01c4 03F00803 		and	r3, r3, #8
 578 01c8 F9E7     		b	.L26
 579              	.L28:
 580 01ca 00BF     		.align	2
 581              	.L27:
 582 01cc 00000000 		.word	.LANCHOR0
 583              	.LBE17:
 584              	.LBE18:
 585              		.cfi_endproc
 586              	.LFE7:
 588              		.align	1
 589              		.global	tmc2590_reset
 590              		.syntax unified
 591              		.thumb
 592              		.thumb_func
 593              		.fpu softvfp
 595              	tmc2590_reset:
 596              	.LVL47:
 597              	.LFB8:
 164:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 165:TMC-API/tmc/ic/TMC2590/TMC2590.c **** uint8_t tmc2590_reset(TMC2590TypeDef *tmc2590)
 166:TMC-API/tmc/ic/TMC2590/TMC2590.c **** {
 598              		.loc 1 166 1 is_stmt 1 view -0
 599              		.cfi_startproc
 600              		@ args = 0, pretend = 0, frame = 0
 601              		@ frame_needed = 0, uses_anonymous_args = 0
 167:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590_writeInt(tmc2590, TMC2590_DRVCONF,  tmc2590->registerResetState[TMC2590_DRVCONF]);
 602              		.loc 1 167 2 view .LVU195
 166:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590_writeInt(tmc2590, TMC2590_DRVCONF,  tmc2590->registerResetState[TMC2590_DRVCONF]);
 603              		.loc 1 166 1 is_stmt 0 view .LVU196
 604 01d0 10B5     		push	{r4, lr}
 605              	.LCFI9:
 606              		.cfi_def_cfa_offset 8
 607              		.cfi_offset 4, -8
 608              		.cfi_offset 14, -4
 166:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590_writeInt(tmc2590, TMC2590_DRVCONF,  tmc2590->registerResetState[TMC2590_DRVCONF]);
 609              		.loc 1 166 1 view .LVU197
 610 01d2 0446     		mov	r4, r0
 611              		.loc 1 167 2 view .LVU198
 612 01d4 C26B     		ldr	r2, [r0, #60]
 613 01d6 0721     		movs	r1, #7
 614 01d8 FFF7FEFF 		bl	tmc2590_writeInt
 615              	.LVL48:
 168:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590_writeInt(tmc2590, TMC2590_DRVCTRL,  tmc2590->registerResetState[TMC2590_DRVCTRL]);
 616              		.loc 1 168 2 is_stmt 1 view .LVU199
 617 01dc 226A     		ldr	r2, [r4, #32]
 618 01de 2046     		mov	r0, r4
 619 01e0 0021     		movs	r1, #0
 620 01e2 FFF7FEFF 		bl	tmc2590_writeInt
 621              	.LVL49:
 169:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590_writeInt(tmc2590, TMC2590_CHOPCONF, tmc2590->registerResetState[TMC2590_CHOPCONF]);
 622              		.loc 1 169 2 view .LVU200
 623 01e6 226B     		ldr	r2, [r4, #48]
 624 01e8 2046     		mov	r0, r4
 625 01ea 0421     		movs	r1, #4
 626 01ec FFF7FEFF 		bl	tmc2590_writeInt
 627              	.LVL50:
 170:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590_writeInt(tmc2590, TMC2590_SMARTEN,  tmc2590->registerResetState[TMC2590_SMARTEN]);
 628              		.loc 1 170 2 view .LVU201
 629 01f0 626B     		ldr	r2, [r4, #52]
 630 01f2 2046     		mov	r0, r4
 631 01f4 0521     		movs	r1, #5
 632 01f6 FFF7FEFF 		bl	tmc2590_writeInt
 633              	.LVL51:
 171:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590_writeInt(tmc2590, TMC2590_SGCSCONF, tmc2590->registerResetState[TMC2590_SGCSCONF]);
 634              		.loc 1 171 2 view .LVU202
 635 01fa 2046     		mov	r0, r4
 636 01fc A26B     		ldr	r2, [r4, #56]
 637 01fe 0621     		movs	r1, #6
 638 0200 FFF7FEFF 		bl	tmc2590_writeInt
 639              	.LVL52:
 172:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 173:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	return 1;
 640              		.loc 1 173 2 view .LVU203
 174:TMC-API/tmc/ic/TMC2590/TMC2590.c **** }
 641              		.loc 1 174 1 is_stmt 0 view .LVU204
 642 0204 0120     		movs	r0, #1
 643 0206 10BD     		pop	{r4, pc}
 644              		.loc 1 174 1 view .LVU205
 645              		.cfi_endproc
 646              	.LFE8:
 648              		.align	1
 649              		.global	tmc2590_restore
 650              		.syntax unified
 651              		.thumb
 652              		.thumb_func
 653              		.fpu softvfp
 655              	tmc2590_restore:
 656              	.LVL53:
 657              	.LFB9:
 175:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 176:TMC-API/tmc/ic/TMC2590/TMC2590.c **** uint8_t tmc2590_restore(TMC2590TypeDef *tmc2590)
 177:TMC-API/tmc/ic/TMC2590/TMC2590.c **** {
 658              		.loc 1 177 1 is_stmt 1 view -0
 659              		.cfi_startproc
 660              		@ args = 0, pretend = 0, frame = 0
 661              		@ frame_needed = 0, uses_anonymous_args = 0
 178:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590_writeInt(tmc2590, TMC2590_DRVCONF,  tmc2590->config->shadowRegister[TMC2590_DRVCONF | TMC2
 662              		.loc 1 178 2 view .LVU207
 663 0208 0368     		ldr	r3, [r0]
 177:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590_writeInt(tmc2590, TMC2590_DRVCONF,  tmc2590->config->shadowRegister[TMC2590_DRVCONF | TMC2
 664              		.loc 1 177 1 is_stmt 0 view .LVU208
 665 020a 10B5     		push	{r4, lr}
 666              	.LCFI10:
 667              		.cfi_def_cfa_offset 8
 668              		.cfi_offset 4, -8
 669              		.cfi_offset 14, -4
 177:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590_writeInt(tmc2590, TMC2590_DRVCONF,  tmc2590->config->shadowRegister[TMC2590_DRVCONF | TMC2
 670              		.loc 1 177 1 view .LVU209
 671 020c 0446     		mov	r4, r0
 672              		.loc 1 178 2 view .LVU210
 673 020e 1A6C     		ldr	r2, [r3, #64]
 674 0210 0721     		movs	r1, #7
 675 0212 FFF7FEFF 		bl	tmc2590_writeInt
 676              	.LVL54:
 179:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590_writeInt(tmc2590, TMC2590_DRVCTRL,  tmc2590->config->shadowRegister[TMC2590_DRVCTRL | TMC2
 677              		.loc 1 179 2 is_stmt 1 view .LVU211
 678 0216 2368     		ldr	r3, [r4]
 679 0218 2046     		mov	r0, r4
 680 021a 5A6A     		ldr	r2, [r3, #36]
 681 021c 0021     		movs	r1, #0
 682 021e FFF7FEFF 		bl	tmc2590_writeInt
 683              	.LVL55:
 180:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590_writeInt(tmc2590, TMC2590_CHOPCONF, tmc2590->config->shadowRegister[TMC2590_CHOPCONF | TMC
 684              		.loc 1 180 2 view .LVU212
 685 0222 2368     		ldr	r3, [r4]
 686 0224 2046     		mov	r0, r4
 687 0226 5A6B     		ldr	r2, [r3, #52]
 688 0228 0421     		movs	r1, #4
 689 022a FFF7FEFF 		bl	tmc2590_writeInt
 690              	.LVL56:
 181:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590_writeInt(tmc2590, TMC2590_SMARTEN,  tmc2590->config->shadowRegister[TMC2590_SMARTEN | TMC2
 691              		.loc 1 181 2 view .LVU213
 692 022e 2368     		ldr	r3, [r4]
 693 0230 2046     		mov	r0, r4
 694 0232 9A6B     		ldr	r2, [r3, #56]
 695 0234 0521     		movs	r1, #5
 696 0236 FFF7FEFF 		bl	tmc2590_writeInt
 697              	.LVL57:
 182:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	tmc2590_writeInt(tmc2590, TMC2590_SGCSCONF, tmc2590->config->shadowRegister[TMC2590_SGCSCONF | TMC
 698              		.loc 1 182 2 view .LVU214
 699 023a 2368     		ldr	r3, [r4]
 700 023c 2046     		mov	r0, r4
 701 023e DA6B     		ldr	r2, [r3, #60]
 702 0240 0621     		movs	r1, #6
 703 0242 FFF7FEFF 		bl	tmc2590_writeInt
 704              	.LVL58:
 183:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 
 184:TMC-API/tmc/ic/TMC2590/TMC2590.c **** 	return 1;
 705              		.loc 1 184 2 view .LVU215
 185:TMC-API/tmc/ic/TMC2590/TMC2590.c **** }
 706              		.loc 1 185 1 is_stmt 0 view .LVU216
 707 0246 0120     		movs	r0, #1
 708 0248 10BD     		pop	{r4, pc}
 709              		.loc 1 185 1 view .LVU217
 710              		.cfi_endproc
 711              	.LFE9:
 713              		.section	.rodata
 714              		.set	.LANCHOR1,. + 0
 717              	tmc2590_defaultRegisterAccess:
 718 0000 02000000 		.ascii	"\002\000\000\000\002\002\002\002"
 718      02020202 
 719              		.bss
 720              		.set	.LANCHOR0,. + 0
 723              	rdsel.4915:
 724 0000 00       		.space	1
 727              	read.4907:
 728 0001 00       		.space	1
 731              	write.4906:
 732 0002 00       		.space	1
 733              		.text
 734              	.Letext0:
 735              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\lib\\gcc\\arm-none
 736              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 737              		.file 4 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 738              		.file 5 "TMC-API/tmc/helpers/Config.h"
 739              		.file 6 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 740              		.file 7 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 741              		.file 8 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 742              		.file 9 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 743              		.file 10 "TMC-API/tmc/ic/TMC2590/TMC2590.h"
DEFINED SYMBOLS
                            *ABS*:00000000 TMC2590.c
C:\Users\Shubham\AppData\Local\Temp\ccicwpkT.s:15     .text:00000000 $t
C:\Users\Shubham\AppData\Local\Temp\ccicwpkT.s:22     .text:00000000 readWrite.isra.0
C:\Users\Shubham\AppData\Local\Temp\ccicwpkT.s:116    .text:00000068 $d
C:\Users\Shubham\AppData\Local\Temp\ccicwpkT.s:120    .text:0000006c $t
C:\Users\Shubham\AppData\Local\Temp\ccicwpkT.s:127    .text:0000006c tmc2590_writeInt
C:\Users\Shubham\AppData\Local\Temp\ccicwpkT.s:190    .text:00000090 tmc2590_readInt
C:\Users\Shubham\AppData\Local\Temp\ccicwpkT.s:283    .text:000000da tmc2590_init
C:\Users\Shubham\AppData\Local\Temp\ccicwpkT.s:379    .text:00000120 $d
C:\Users\Shubham\AppData\Local\Temp\ccicwpkT.s:383    .text:00000124 $t
C:\Users\Shubham\AppData\Local\Temp\ccicwpkT.s:390    .text:00000124 tmc2590_periodicJob
C:\Users\Shubham\AppData\Local\Temp\ccicwpkT.s:582    .text:000001cc $d
C:\Users\Shubham\AppData\Local\Temp\ccicwpkT.s:588    .text:000001d0 $t
C:\Users\Shubham\AppData\Local\Temp\ccicwpkT.s:595    .text:000001d0 tmc2590_reset
C:\Users\Shubham\AppData\Local\Temp\ccicwpkT.s:655    .text:00000208 tmc2590_restore
C:\Users\Shubham\AppData\Local\Temp\ccicwpkT.s:717    .rodata:00000000 tmc2590_defaultRegisterAccess
C:\Users\Shubham\AppData\Local\Temp\ccicwpkT.s:723    .bss:00000000 rdsel.4915
C:\Users\Shubham\AppData\Local\Temp\ccicwpkT.s:724    .bss:00000000 $d
C:\Users\Shubham\AppData\Local\Temp\ccicwpkT.s:727    .bss:00000001 read.4907
C:\Users\Shubham\AppData\Local\Temp\ccicwpkT.s:731    .bss:00000002 write.4906

UNDEFINED SYMBOLS
tmc2590_readWriteArray
